(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{109:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),s=n.n(a),i=n(59),r=n.n(i),o=n(5),l=n(6),u=(n(109),function(){var e=Object(l.f)(),t=Object(a.useState)(""),n=Object(o.a)(t,2),s=n[0],i=n[1],r=Object(a.useState)(""),u=Object(o.a)(r,2),j=u[0],d=u[1],p=Object(a.useState)(""),b=Object(o.a)(p,2),h=b[0],O=b[1],f=Object(a.useState)(""),m=Object(o.a)(f,2),g=m[0],x=m[1],S=Object(a.useState)(""),v=Object(o.a)(S,2),y=v[0],N=v[1],C=Object(a.useState)(""),w=Object(o.a)(C,2),E=w[0],B=w[1],I=Object(a.useState)(""),J=Object(o.a)(I,2),_=J[0],q=J[1],D=Object(a.useState)(void 0),k=Object(o.a)(D,2),T=k[0],A=k[1],R=Object(a.useState)(!1),P=Object(o.a)(R,2),U=P[0],z=P[1],F=Object(a.useState)(""),H=Object(o.a)(F,2),M=H[0],L=H[1],$=Object(a.useState)(""),W=Object(o.a)($,2),G=W[0],K=W[1],Q=Object(a.useState)(""),V=Object(o.a)(Q,2),X=V[0],Y=V[1];Object(a.useEffect)((function(){M&&Z()}),[M]);var Z=function(){fetch("/signup",{method:"post",headers:{"content-Type":"application/json"},body:JSON.stringify({username:E,email:s,mobile:_,password:j,check:U,pic:M||"https://res.cloudinary.com/blogsimagesaccount/image/upload/v1610867243/default-profile-picture_p1nqbe.png",timeOfCreation:Date.now()})}).then((function(e){return e.json()})).then((function(t){t.error?Y(t.error):(Y(t.message),e.push("/signin"))})).catch((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))};return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{className:"signup-form",onSubmit:function(e){e.preventDefault(),s.trim(),j.trim(),E.trim(),_.trim(),j===h&&_.match("^[6789][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$")&&U?(x(""),N(""),K(""),T?function(){var e=new FormData;e.append("file",T),e.append("upload_preset","blogspreset"),e.append("cloud_name","blogsimagesaccount"),fetch("https://api.cloudinary.com/v1_1/blogsimagesaccount/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){return L(e.url)})).catch((function(e){return console.error(e)}))}():Z()):(j!==h&&x("Enter same passwords"),_.match("^[6789][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$")||N("Enter valid mobile number"),U||K("Please accept all terms and conditions to continue..."))},children:[Object(c.jsx)("input",{className:"basic-input",type:"text",placeholder:"Enter Name",value:E,onChange:function(e){B(e.target.value)},required:!0,autoFocus:!0}),Object(c.jsx)("input",{className:"basic-input",type:"text",placeholder:"Enter mobile number ",value:_,inputMode:"numeric",onChange:function(e){q(e.target.value)},required:!0}),Object(c.jsx)("input",{className:"basic-input",type:"email",placeholder:"Email",value:s,onChange:function(e){i(e.target.value)},required:!0}),Object(c.jsx)("input",{className:"basic-input",type:"password",placeholder:"enter password",value:j,onChange:function(e){d(e.target.value)},required:!0,autoComplete:"off"}),Object(c.jsx)("input",{className:"basic-input",type:"password",placeholder:"re-enter password",value:h,onChange:function(e){O(e.target.value)},required:!0,autoComplete:"off"}),Object(c.jsxs)("span",{className:"signup-span",children:[Object(c.jsx)("label",{className:"profile-picture-label",htmlFor:"dp",children:"Upload profile picture"}),Object(c.jsx)("input",{type:"file",className:"profile-picture-input",placeholder:"Display piture",name:"dp",onChange:function(e){return A(e.target.files[0])}})]}),Object(c.jsxs)("span",{className:"signup-span",children:[" ",Object(c.jsx)("input",{type:"checkbox",name:"terms",value:"accept",onChange:function(){return z(!U)}}),Object(c.jsxs)("label",{htmlFor:"terms",children:["I accept all ",Object(c.jsx)("a",{href:"#",children:"terms and conditions."})]})]}),Object(c.jsx)("p",{children:g}),Object(c.jsx)("p",{children:y}),Object(c.jsx)("p",{children:G}),Object(c.jsx)("p",{children:X}),Object(c.jsx)("button",{type:"submit",children:"Signup"})]})})}),j=(n(114),function(){var e=Object(l.f)(),t=Object(a.useContext)(q).dispatch,n=Object(a.useState)(""),s=Object(o.a)(n,2),i=s[0],r=s[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),d=j[0],p=j[1],b=Object(a.useState)(""),h=Object(o.a)(b,2),O=h[0],f=h[1],m=Object(a.useState)(""),g=Object(o.a)(m,2),x=g[0],S=g[1],v=Object(a.useState)(""),y=Object(o.a)(v,2),N=y[0],C=y[1];return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{className:"signin-form",onSubmit:function(n){n.preventDefault(),d.trim(),O.trim(),O.match("^[6789][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$")?(S(""),fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:d,mobile:O})}).then((function(e){return e.json()})).then((function(n){n.err?C(n.err):(localStorage.setItem("jwt",n.token),localStorage.setItem("user",JSON.stringify(n.user)),t({type:"USER",payload:n.user}),e.push("/"))})).catch((function(e){return console.error(e)}))):S("Enter mobile number in valid format!")},children:[Object(c.jsx)("input",{className:"basic-input",required:!0,type:"email",name:"email",placeholder:"Enter registered email",value:i,onChange:function(e){r(e.target.value)}}),Object(c.jsx)("input",{className:"basic-input",type:"password",required:!0,placeholder:"Enter password",name:"password",value:d,onChange:function(e){p(e.target.value)}}),Object(c.jsx)("input",{className:"basic-input",placeholder:"Enter 10 digit registered mobile number",required:!0,type:"text",value:O,onChange:function(e){f(e.target.value)}}),Object(c.jsx)("p",{children:x}),Object(c.jsx)("p",{children:N}),Object(c.jsx)("button",{type:"submit",children:"Submit"})]})})}),d=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"in home"})})},p=n(103),b=n.n(p),h=n(12),O=(n(115),function(e){var t=e.title,n=e.postedBy,a=e.description,s=e.body,i=e.postedByPic,r=e.postedByUsername,o=e.postedOn;return s=b()(JSON.parse(s)),Object(c.jsxs)("div",{className:"blog-card",children:[Object(c.jsxs)("div",{className:"top-banner",children:[Object(c.jsxs)("span",{className:"image-name",children:[Object(c.jsx)("img",{className:"posted-profile-image",src:i,alt:"profile display img"}),Object(c.jsxs)(h.b,{className:"posted-username",to:n===JSON.parse(localStorage.getItem("user"))._id?"/profile":"/profile/".concat(n),children:[" ",Object(c.jsx)("h4",{children:r})," "]})]}),Object(c.jsx)("p",{className:"posted-date",children:new Date(Number(o)).toDateString().substr(4,14)})]}),Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("h2",{className:"posted-title",children:t}),Object(c.jsx)("h5",{className:"posted-description",children:a}),Object(c.jsx)("div",{className:"posted-body",dangerouslySetInnerHTML:{__html:s}})]})]})}),f=(n(116),function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],i=1;Object(a.useEffect)((function(){fetch("/blogs/1",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return s(e)})).catch((function(e){return console.log(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"In Explore"}),Object(c.jsx)("div",{className:"blogs-container",children:n?n.map((function(e){return Object(c.jsx)(O,{title:e.title,className:"blogs",description:e.description,body:e.body,postedByPic:e.postedByPic,postedByUsername:e.postedByUsername,postedOn:e.postedOn,postedBy:e.postedBy},e._id)})):Object(c.jsx)("p",{})}),Object(c.jsx)("button",{className:"next-button",onClick:function(){fetch("/blogs/".concat(i+=1),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return s(e)})).catch((function(e){return console.log(e)}))},children:"Next"})]})}),m=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:void 0},g=(n(117),function(){var e=Object(a.useContext)(q),t=e.state,n=e.dispatch,s=Object(l.f)();return Object(c.jsxs)("nav",{children:[Object(c.jsx)(h.b,{className:"logo",to:t?"/":"/signin",children:"Blogger"}),Object(c.jsx)("ul",{className:"navbar-list",children:t?[Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/profile",children:"Profile"})},"1"),Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/create",children:"Create Blog"})},"2"),Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/explore",children:"Explore"})},"3"),Object(c.jsx)("li",{children:Object(c.jsx)("button",{onClick:function(){localStorage.clear(),n({type:"CLEAR"}),s.push("/")},children:"logout"})},"4")]:[Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/signin",children:"Signin"})},"1"),Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/signup",children:"Signup"})},"2")]})]})}),x=n(8),S=n(44),v=n(45),y=n(48),N=n(47),C=n(22),w=(n(101),n(213),n(46)),E=function(e){Object(y.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(S.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={editorState:C.EditorState.createEmpty(),title:"",description:""},e.onEditorStateChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{editorState:t}))},e.titleChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{title:t.target.value}))},e.descriptionChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{description:t.target.value}))},e.submitHandler=function(t){t.preventDefault(),fetch("/create",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:e.state.title,description:e.state.description,body:JSON.stringify(Object(C.convertToRaw)(e.state.editorState.getCurrentContent())),postedOn:Math.round(+new Date/1e3)})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.state.editorState;return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{className:"editor-form",onSubmit:this.submitHandler,children:[Object(c.jsx)("input",{className:"editor-input",type:"text",placeholder:"Enter Title",value:this.state.title,onChange:this.titleChange,required:!0}),Object(c.jsx)("input",{className:"editor-input",type:"text",placeholder:"Enter Description",value:this.state.description,onChange:this.descriptionChange,required:!0}),Object(c.jsx)(w.Editor,{placeholder:"Type body of the blog",editorState:e,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:this.onEditorStateChange}),Object(c.jsx)("input",{className:"button",type:"submit"})]})})}}]),n}(a.Component),B=(n(214),function(){var e=Object(a.useRef)(null),t=Object(a.useState)(""),n=Object(o.a)(t,2),s=n[0],i=n[1],r=Object(a.useState)(""),u=Object(o.a)(r,2),j=u[0],d=u[1],p=JSON.parse(localStorage.getItem("user"))._id,b=Object(l.f)();Object(a.useEffect)((function(){fetch("/user/".concat(p),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return i(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){if(j){var e=new FormData;e.append("file",j),e.append("upload_preset","blogspreset"),e.append("cloud_name","blogsimagesaccount"),fetch("https://api.cloudinary.com/v1_1/blogsimagesaccount/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){fetch("/updateProfilePic",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({pic:e.url})}).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(localStorage.getItem("user"));t.pic=e.pic,localStorage.setItem("user",JSON.stringify(t)),i({user:Object(x.a)(Object(x.a)({},s.user),{},{pic:e.pic}),posts:s.posts})}))}))}}),[j]);return Object(c.jsx)("div",{children:s?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"profile-user",children:[Object(c.jsxs)("div",{className:"profile-pic-name",children:[Object(c.jsx)("button",{className:"profile-update-button",onClick:function(){e.current.click()},children:Object(c.jsx)("img",{src:s.user.pic,alt:"user display",width:"40px",height:"50px"})}),Object(c.jsx)("h2",{className:"profile-username",children:s.user.username})]}),Object(c.jsxs)("div",{className:"followers-following",children:[Object(c.jsxs)("p",{className:"profile-followers",children:[s.user.followers.length," followers"]}),Object(c.jsxs)("p",{className:"profile-following",children:[s.user.following.length," following"]})]}),Object(c.jsx)("input",{hidden:!0,type:"file",ref:e,onChange:function(e){return function(e){d(e.target.files[0])}(e)}})]}),Object(c.jsx)("br",{}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"posts-container",children:s.posts.map((function(e){return Object(c.jsxs)("div",{className:"profile-posts",children:[Object(c.jsxs)("button",{className:"edit-post-button",onClick:function(){return t=e._id,n=e.title,c=e.description,a=e.body,void b.push({pathname:"/editBlog",state:{id:t,title:n,description:c,body:a}});var t,n,c,a},children:[" ",Object(c.jsx)("p",{className:"profile-title",children:Object(c.jsx)("strong",{children:e.title})})]}),Object(c.jsx)("p",{className:"profile-description",children:e.description})]},e._id)}))})]}):Object(c.jsx)("p",{children:"Loading..."})})}),I=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"in userProfile"})})},J=(n(215),function(e){Object(y.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(S.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={editorState:C.EditorState.createWithContent(Object(C.convertFromRaw)(JSON.parse(e.props.location.state.body))),title:e.props.location.state.title,description:e.props.location.state.description},e.onEditorStateChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{editorState:t}))},e.titleChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{title:t.target.value}))},e.descriptionChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{description:t.target.value}))},e.submitHandler=function(t){t.preventDefault(),console.log(e.state.title,e.state.description,e.state.editorState),fetch("/updateBlog",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({_id:e.props.location.state.id,title:e.state.title,description:e.state.description,body:JSON.stringify(Object(C.convertToRaw)(e.state.editorState.getCurrentContent())),postedOn:Math.round(+new Date/1e3)})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},e}return Object(v.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("form",{className:"editor-form",onSubmit:this.submitHandler,children:[Object(c.jsx)("h1",{children:"Update Blog"}),Object(c.jsx)("input",{className:"editor-input",type:"text",value:this.state.title,onChange:this.titleChange,required:!0}),Object(c.jsx)("input",{className:"editor-input",type:"text",value:this.state.description,onChange:this.descriptionChange,required:!0}),Object(c.jsx)(w.Editor,{placeholder:"Type body of the blog",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange}),Object(c.jsx)("input",{className:"button",type:"submit",placeholder:"update"})]})}}]),n}(s.a.Component)),_=Object(l.g)(J),q=Object(a.createContext)(),D=function(){var e=Object(l.f)(),t=Object(a.useContext)(q),n=(t.state,t.dispatch);return Object(a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?n({type:"USER",payload:t}):e.push("/signin")}),[]),Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{exact:!0,path:"/",children:Object(c.jsx)(d,{})}),Object(c.jsx)(l.a,{path:"/signup",children:Object(c.jsx)(u,{})}),Object(c.jsx)(l.a,{path:"/signin",children:Object(c.jsx)(j,{})}),Object(c.jsx)(l.a,{path:"/create",children:Object(c.jsx)(E,{})}),Object(c.jsx)(l.a,{path:"/explore",children:Object(c.jsx)(f,{})}),Object(c.jsx)(l.a,{exact:!0,path:"/profile",children:Object(c.jsx)(B,{})}),Object(c.jsx)(l.a,{path:"/profile/:userid",children:Object(c.jsx)(I,{})}),Object(c.jsx)(l.a,{path:"/editBlog",children:Object(c.jsx)(_,{})})]})},k=function(){var e=Object(a.useReducer)(m,null),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(c.jsx)(q.Provider,{value:{state:n,dispatch:s},children:Object(c.jsxs)(h.a,{children:[Object(c.jsx)(g,{}),Object(c.jsx)(D,{})]})})};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.7c12dd93.chunk.js.map