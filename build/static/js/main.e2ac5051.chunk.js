(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{109:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),s=n.n(a),i=n(59),o=n.n(i),r=n(5),l=n(6),u=(n(109),function(){var e=Object(l.f)(),t=Object(a.useState)(""),n=Object(r.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)(""),u=Object(r.a)(o,2),p=u[0],j=u[1],d=Object(a.useState)(""),b=Object(r.a)(d,2),h=b[0],O=b[1],m=Object(a.useState)(""),f=Object(r.a)(m,2),g=f[0],x=f[1],S=Object(a.useState)(""),v=Object(r.a)(S,2),y=v[0],N=v[1],C=Object(a.useState)(""),w=Object(r.a)(C,2),E=w[0],B=w[1],k=Object(a.useState)(""),I=Object(r.a)(k,2),J=I[0],_=I[1],q=Object(a.useState)(void 0),D=Object(r.a)(q,2),R=D[0],T=D[1],A=Object(a.useState)(!1),U=Object(r.a)(A,2),P=U[0],z=U[1],F=Object(a.useState)(""),L=Object(r.a)(F,2),H=L[0],M=L[1],$=Object(a.useState)(""),W=Object(r.a)($,2),G=W[0],K=W[1],Q=Object(a.useState)(""),V=Object(r.a)(Q,2),X=V[0],Y=V[1];Object(a.useEffect)((function(){H&&Z()}),[H]);var Z=function(){fetch("".concat("https://blogger-applicaton1.herokuapp.com","/signup"),{method:"post",headers:{"content-Type":"application/json"},body:JSON.stringify({username:E,email:s,mobile:J,password:p,check:P,pic:H||"https://res.cloudinary.com/blogsimagesaccount/image/upload/v1610867243/default-profile-picture_p1nqbe.png",timeOfCreation:Date.now()})}).then((function(e){return e.json()})).then((function(t){t.error?Y(t.error):(Y(t.message),e.push("/signin"))})).catch((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))};return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{className:"signup-form",onSubmit:function(e){e.preventDefault(),s.trim(),p.trim(),E.trim(),J.trim(),p===h&&J.match("^[6789][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$")&&P?(x(""),N(""),K(""),R?function(){var e=new FormData;e.append("file",R),e.append("upload_preset","blogspreset"),e.append("cloud_name","blogsimagesaccount"),fetch("https://api.cloudinary.com/v1_1/blogsimagesaccount/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){return M(e.url)})).catch((function(e){return console.error(e)}))}():Z()):(p!==h&&x("Enter same passwords"),J.match("^[6789][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$")||N("Enter valid mobile number"),P||K("Please accept all terms and conditions to continue..."))},children:[Object(c.jsx)("input",{className:"basic-input",type:"text",placeholder:"Enter Name",value:E,onChange:function(e){B(e.target.value)},required:!0,autoFocus:!0}),Object(c.jsx)("input",{className:"basic-input",type:"text",placeholder:"Enter mobile number ",value:J,inputMode:"numeric",onChange:function(e){_(e.target.value)},required:!0}),Object(c.jsx)("input",{className:"basic-input",type:"email",placeholder:"Email",value:s,onChange:function(e){i(e.target.value)},required:!0}),Object(c.jsx)("input",{className:"basic-input",type:"password",placeholder:"enter password",value:p,onChange:function(e){j(e.target.value)},required:!0,autoComplete:"off"}),Object(c.jsx)("input",{className:"basic-input",type:"password",placeholder:"re-enter password",value:h,onChange:function(e){O(e.target.value)},required:!0,autoComplete:"off"}),Object(c.jsxs)("span",{className:"signup-span",children:[Object(c.jsx)("label",{className:"profile-picture-label",htmlFor:"dp",children:"Upload profile picture"}),Object(c.jsx)("input",{type:"file",className:"profile-picture-input",placeholder:"Display piture",name:"dp",onChange:function(e){return T(e.target.files[0])}})]}),Object(c.jsxs)("span",{className:"signup-span",children:[" ",Object(c.jsx)("input",{type:"checkbox",name:"terms",value:"accept",onChange:function(){return z(!P)}}),Object(c.jsxs)("label",{htmlFor:"terms",children:["I accept all ",Object(c.jsx)("a",{href:"#",children:"terms and conditions."})]})]}),Object(c.jsx)("p",{children:g}),Object(c.jsx)("p",{children:y}),Object(c.jsx)("p",{children:G}),Object(c.jsx)("p",{children:X}),Object(c.jsx)("button",{type:"submit",children:"Signup"})]})})}),p=(n(114),function(){var e=Object(l.f)(),t=Object(a.useContext)(D).dispatch,n=Object(a.useState)(""),s=Object(r.a)(n,2),i=s[0],o=s[1],u=Object(a.useState)(""),p=Object(r.a)(u,2),j=p[0],d=p[1],b=Object(a.useState)(""),h=Object(r.a)(b,2),O=h[0],m=h[1],f=Object(a.useState)(""),g=Object(r.a)(f,2),x=g[0],S=g[1],v=Object(a.useState)(""),y=Object(r.a)(v,2),N=y[0],C=y[1];return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{className:"signin-form",onSubmit:function(n){n.preventDefault(),j.trim(),O.trim(),O.match("^[6789][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$")?(S(""),fetch("".concat("https://blogger-applicaton1.herokuapp.com","/signin"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:j,mobile:O})}).then((function(e){return e.json()})).then((function(n){n.err?C(n.err):(localStorage.setItem("jwt",n.token),localStorage.setItem("user",JSON.stringify(n.user)),t({type:"USER",payload:n.user}),e.push("/"))})).catch((function(e){return console.error(e)}))):S("Enter mobile number in valid format!")},children:[Object(c.jsx)("input",{className:"basic-input",required:!0,type:"email",name:"email",placeholder:"Enter registered email",value:i,onChange:function(e){o(e.target.value)}}),Object(c.jsx)("input",{className:"basic-input",type:"password",required:!0,placeholder:"Enter password",name:"password",value:j,onChange:function(e){d(e.target.value)}}),Object(c.jsx)("input",{className:"basic-input",placeholder:"Enter 10 digit registered mobile number",required:!0,type:"text",value:O,onChange:function(e){m(e.target.value)}}),Object(c.jsx)("p",{children:x}),Object(c.jsx)("p",{children:N}),Object(c.jsx)("button",{type:"submit",children:"Submit"})]})})}),j=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"in home"})})},d=n(103),b=n.n(d),h=n(12),O=(n(115),function(e){var t=e.title,n=e.postedBy,a=e.description,s=e.body,i=e.postedByPic,o=e.postedByUsername,r=e.postedOn;return s=b()(JSON.parse(s)),Object(c.jsxs)("div",{className:"blog-card",children:[Object(c.jsxs)("div",{className:"top-banner",children:[Object(c.jsxs)("span",{className:"image-name",children:[Object(c.jsx)("img",{className:"posted-profile-image",src:i,alt:"profile display img"}),Object(c.jsxs)(h.b,{className:"posted-username",to:n===JSON.parse(localStorage.getItem("user"))._id?"/profile":"/profile/".concat(n),children:[" ",Object(c.jsx)("h4",{children:o})," "]})]}),Object(c.jsx)("p",{className:"posted-date",children:new Date(Number(r)).toDateString().substr(4,14)})]}),Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("h2",{className:"posted-title",children:t}),Object(c.jsx)("h5",{className:"posted-description",children:a}),Object(c.jsx)("div",{className:"posted-body",dangerouslySetInnerHTML:{__html:s}})]})]})}),m=(n(116),function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],i=1;Object(a.useEffect)((function(){fetch("/blogs/1",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return s(e)})).catch((function(e){return console.log(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"In Explore"}),Object(c.jsx)("div",{className:"blogs-container",children:n?n.map((function(e){return Object(c.jsx)(O,{title:e.title,className:"blogs",description:e.description,body:e.body,postedByPic:e.postedByPic,postedByUsername:e.postedByUsername,postedOn:e.postedOn,postedBy:e.postedBy},e._id)})):Object(c.jsx)("p",{})}),Object(c.jsx)("button",{className:"next-button",onClick:function(){fetch("/blogs/".concat(i+=1),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return s(e)})).catch((function(e){return console.log(e)}))},children:"Next"})]})}),f=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:void 0},g=(n(117),function(){var e=Object(a.useContext)(D),t=e.state,n=e.dispatch,s=Object(l.f)();return Object(c.jsxs)("nav",{children:[Object(c.jsx)(h.b,{className:"logo",to:t?"/":"/signin",children:"Blogger"}),Object(c.jsx)("ul",{className:"navbar-list",children:t?[Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/profile",children:"Profile"})},"1"),Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/create",children:"Create Blog"})},"2"),Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/explore",children:"Explore"})},"3"),Object(c.jsx)("li",{children:Object(c.jsx)("button",{onClick:function(){localStorage.clear(),n({type:"CLEAR"}),s.push("/")},children:"logout"})},"4")]:[Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/signin",children:"Signin"})},"1"),Object(c.jsx)("li",{children:Object(c.jsx)(h.b,{to:"/signup",children:"Signup"})},"2")]})]})}),x=n(8),S=n(44),v=n(45),y=n(48),N=n(47),C=n(22),w=(n(101),n(213),n(46)),E=function(e){Object(y.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(S.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).productionURL="https://blogger-applicaton1.herokuapp.com",e.state={editorState:C.EditorState.createEmpty(),title:"",description:""},e.onEditorStateChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{editorState:t}))},e.titleChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{title:t.target.value}))},e.descriptionChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{description:t.target.value}))},e.submitHandler=function(t){t.preventDefault(),fetch("".concat(e.productionURL,"/create"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:e.state.title,description:e.state.description,body:JSON.stringify(Object(C.convertToRaw)(e.state.editorState.getCurrentContent())),postedOn:Math.round(+new Date/1e3)})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.state.editorState;return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{className:"editor-form",onSubmit:this.submitHandler,children:[Object(c.jsx)("input",{className:"editor-input",type:"text",placeholder:"Enter Title",value:this.state.title,onChange:this.titleChange,required:!0}),Object(c.jsx)("input",{className:"editor-input",type:"text",placeholder:"Enter Description",value:this.state.description,onChange:this.descriptionChange,required:!0}),Object(c.jsx)(w.Editor,{placeholder:"Type body of the blog",editorState:e,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:this.onEditorStateChange}),Object(c.jsx)("input",{className:"button",type:"submit"})]})})}}]),n}(a.Component),B=(n(214),"https://blogger-applicaton1.herokuapp.com"),k=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(""),n=Object(r.a)(t,2),s=n[0],i=n[1],o=Object(a.useState)(""),u=Object(r.a)(o,2),p=u[0],j=u[1],d=JSON.parse(localStorage.getItem("user"))._id,b=Object(l.f)();Object(a.useEffect)((function(){fetch("".concat(B,"/user/").concat(d),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){return i(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){if(p){var e=new FormData;e.append("file",p),e.append("upload_preset","blogspreset"),e.append("cloud_name","blogsimagesaccount"),fetch("https://api.cloudinary.com/v1_1/blogsimagesaccount/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){fetch("".concat(B,"/updateProfilePic"),{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({pic:e.url})}).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(localStorage.getItem("user"));t.pic=e.pic,localStorage.setItem("user",JSON.stringify(t)),i({user:Object(x.a)(Object(x.a)({},s.user),{},{pic:e.pic}),posts:s.posts})}))}))}}),[p]);return Object(c.jsx)("div",{children:s?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"profile-user",children:[Object(c.jsxs)("div",{className:"profile-pic-name",children:[Object(c.jsx)("button",{className:"profile-update-button",onClick:function(){e.current.click()},children:Object(c.jsx)("img",{src:s.user.pic,alt:"user display",width:"40px",height:"50px"})}),Object(c.jsx)("h2",{className:"profile-username",children:s.user.username})]}),Object(c.jsxs)("div",{className:"followers-following",children:[Object(c.jsxs)("p",{className:"profile-followers",children:[s.user.followers.length," followers"]}),Object(c.jsxs)("p",{className:"profile-following",children:[s.user.following.length," following"]})]}),Object(c.jsx)("input",{hidden:!0,type:"file",ref:e,onChange:function(e){return function(e){j(e.target.files[0])}(e)}})]}),Object(c.jsx)("br",{}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"posts-container",children:s.posts.map((function(e){return Object(c.jsxs)("div",{className:"profile-posts",children:[Object(c.jsxs)("button",{className:"edit-post-button",onClick:function(){return t=e._id,n=e.title,c=e.description,a=e.body,void b.push({pathname:"/editBlog",state:{id:t,title:n,description:c,body:a}});var t,n,c,a},children:[" ",Object(c.jsx)("p",{className:"profile-title",children:Object(c.jsx)("strong",{children:e.title})})]}),Object(c.jsx)("p",{className:"profile-description",children:e.description})]},e._id)}))})]}):Object(c.jsx)("p",{children:"Loading..."})})},I=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"in userProfile"})})},J=(n(215),"https://blogger-applicaton1.herokuapp.com"),_=function(e){Object(y.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(S.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={editorState:C.EditorState.createWithContent(Object(C.convertFromRaw)(JSON.parse(e.props.location.state.body))),title:e.props.location.state.title,description:e.props.location.state.description},e.onEditorStateChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{editorState:t}))},e.titleChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{title:t.target.value}))},e.descriptionChange=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{description:t.target.value}))},e.submitHandler=function(t){t.preventDefault(),console.log(e.state.title,e.state.description,e.state.editorState),fetch("".concat(J,"/updateBlog"),{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({_id:e.props.location.state.id,title:e.state.title,description:e.state.description,body:JSON.stringify(Object(C.convertToRaw)(e.state.editorState.getCurrentContent())),postedOn:Math.round(+new Date/1e3)})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},e}return Object(v.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("form",{className:"editor-form",onSubmit:this.submitHandler,children:[Object(c.jsx)("h1",{children:"Update Blog"}),Object(c.jsx)("input",{className:"editor-input",type:"text",value:this.state.title,onChange:this.titleChange,required:!0}),Object(c.jsx)("input",{className:"editor-input",type:"text",value:this.state.description,onChange:this.descriptionChange,required:!0}),Object(c.jsx)(w.Editor,{placeholder:"Type body of the blog",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange}),Object(c.jsx)("input",{className:"button",type:"submit",placeholder:"update"})]})}}]),n}(s.a.Component),q=Object(l.g)(_),D=Object(a.createContext)(),R=function(){var e=Object(l.f)(),t=Object(a.useContext)(D),n=(t.state,t.dispatch);return Object(a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?n({type:"USER",payload:t}):e.push("/signin")}),[]),Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{exact:!0,path:"/",children:Object(c.jsx)(j,{})}),Object(c.jsx)(l.a,{path:"/signup",children:Object(c.jsx)(u,{})}),Object(c.jsx)(l.a,{path:"/signin",children:Object(c.jsx)(p,{})}),Object(c.jsx)(l.a,{path:"/create",children:Object(c.jsx)(E,{})}),Object(c.jsx)(l.a,{path:"/explore",children:Object(c.jsx)(m,{})}),Object(c.jsx)(l.a,{exact:!0,path:"/profile",children:Object(c.jsx)(k,{})}),Object(c.jsx)(l.a,{path:"/profile/:userid",children:Object(c.jsx)(I,{})}),Object(c.jsx)(l.a,{path:"/editBlog",children:Object(c.jsx)(q,{})})]})},T=function(){var e=Object(a.useReducer)(f,null),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(c.jsx)(D.Provider,{value:{state:n,dispatch:s},children:Object(c.jsxs)(h.a,{children:[Object(c.jsx)(g,{}),Object(c.jsx)(R,{})]})})};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.e2ac5051.chunk.js.map